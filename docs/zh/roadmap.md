# elinOS 发展路线图

> **🚧 翻译进行中** - 本文档正在翻译中，详细内容请参考 [英文完整版](../en/roadmap.md)。

本文档概述了 elinOS 的计划开发阶段和未来增强功能。

## 当前状态

elinOS 已实现：
- ✅ **核心系统**：RISC-V 64 位内核，具有动态内存管理
- ✅ **系统调用架构**：9 类别专业组织（受 Qiling 启发）
- ✅ **VirtIO 支持**：块设备驱动程序，具有 MMIO 发现
- ✅ **文件系统**：具有类 POSIX 操作的内存文件系统
- ✅ **ELF 加载器**：完整的 ELF64 解析和加载基础设施
- ✅ **交互式命令行**：具有综合工具的动态命令系统
- ✅ **构建系统**：自动化构建和部署脚本

## 第一阶段：基础完善（短期）

### 1.1 完成核心系统调用
**时间线：2-4 周**

**文件 I/O 操作 (1-50)：**
- [ ] **SYS_READ (2)** - 完成文件描述符读取
- [ ] **SYS_CLOSE (4)** - 文件描述符管理
- [ ] **SYS_SEEK (8)** - 文件位置定位
- [ ] **SYS_STAT (9)** - 增强文件状态信息

**目录操作 (51-70)：**
- [ ] **SYS_MKDIR (51)** - 目录创建
- [ ] **SYS_RMDIR (52)** - 目录删除
- [ ] **SYS_CHDIR (53)** - 更改当前目录
- [ ] **SYS_GETCWD (54)** - 获取当前工作目录

### 1.2 增强内存管理
**时间线：1-2 周**

- [ ] **SYS_MMAP (71)** - 内存映射接口
- [ ] **SYS_MUNMAP (72)** - 内存取消映射
- [ ] **SYS_MPROTECT (73)** - 内存保护控制
- [ ] **内存泄漏检测** - 调试基础设施

### 1.3 改进设备支持
**时间线：1-2 周**

- [ ] **VirtIO 网络设备** - 基本网络接口
- [ ] **设备枚举** - 更好的设备发现
- [ ] **IRQ 处理基础** - 中断基础设施

## 第二阶段：虚拟内存和进程管理（中期）

### 2.1 虚拟内存系统
**时间线：4-6 周**

**核心基础设施：**
- [ ] **页表管理** - RISC-V Sv39 实现
- [ ] **地址空间抽象** - 每进程虚拟内存
- [ ] **页面分配** - 物理页面帧管理
- [ ] **内存保护** - 硬件强制访问控制

### 2.2 进程管理
**时间线：3-4 周**

**进程基础设施：**
- [ ] **进程控制块** - 进程状态管理
- [ ] **SYS_FORK (122)** - 进程创建
- [ ] **SYS_EXEC (123)** - 程序执行
- [ ] **SYS_WAIT (124)** - 进程同步
- [ ] **SYS_KILL (125)** - 进程终止

### 2.3 ELF 程序执行
**时间线：2-3 周**

**实际执行：**
- [ ] **程序加载器** - 将 ELF 段复制到虚拟内存
- [ ] **入口点跳转** - 将控制转移到用户程序
- [ ] **用户/内核模式切换** - 特权级别管理
- [ ] **系统调用接口** - 用户到内核的转换

## 第三阶段：高级功能（长期）

### 3.1 真实文件系统支持
**时间线：4-6 周**

**FAT32 集成：**
- [ ] **fatfs crate 集成** - 真实文件系统支持
- [ ] **块设备 I/O** - 持久存储操作
- [ ] **目录层次结构** - 多级目录支持
- [ ] **文件权限** - 基本访问控制

### 3.2 网络协议栈
**时间线：6-8 周**

**基本网络：**
- [ ] **VirtIO 网络驱动** - 网络设备支持
- [ ] **以太网帧处理** - 第 2 层协议
- [ ] **IP 协议栈** - 基本 IPv4 支持
- [ ] **套接字接口** - 网络编程 API

### 3.3 多核支持
**时间线：6-10 周**

**SMP 基础设施：**
- [ ] **Hart 管理** - 多核初始化
- [ ] **处理器间中断** - 核心通信
- [ ] **原子操作** - 无锁数据结构
- [ ] **每核数据结构** - CPU 本地存储

## 第四阶段：用户体验和应用程序（未来）

### 4.1 用户应用程序
**时间线：8-12 周**

**系统实用程序：**
- [ ] **文本编辑器** - 简单文件编辑（类似 vi）
- [ ] **命令行脚本** - 基本脚本执行
- [ ] **进程监视器** - ps/top 等效
- [ ] **文件实用程序** - cp、mv、find、grep 等效

### 4.2 高级命令行功能
**时间线：2-3 周**

**命令行增强：**
- [ ] **命令历史** - 持久命令历史
- [ ] **Tab 补全** - 智能补全
- [ ] **命令管道** - 管道操作支持
- [ ] **后台进程** - 作业控制

## 实施策略

### 开发方法

**增量开发：**
1. **小型、专注的 PR** - 增量功能开发
2. **功能标志** - 在开发期间启用/禁用功能
3. **向后兼容性** - 在过渡期间保持兼容性
4. **全面测试** - 彻底测试每个功能

## 成功指标

### 第一阶段指标
- [ ] 所有核心系统调用已实现并测试
- [ ] 提供全面的命令套件
- [ ] 稳定的内存管理，无泄漏
- [ ] 完整的文档覆盖

### 第二阶段指标
- [ ] 用户程序可以成功执行
- [ ] 虚拟内存提供进程隔离
- [ ] 基本多任务功能
- [ ] 正常操作期间无内核崩溃

### 第三阶段指标
- [ ] 真实文件系统操作正常工作
- [ ] 网络通信功能正常
- [ ] 支持多核系统
- [ ] 性能与最小 Linux 相当

## 参与指南

### 参与方式

**贡献领域：**
1. **核心系统开发** - 内核功能和系统调用
2. **用户应用程序** - 命令行工具和实用程序
3. **测试和质量保证** - 测试用例和质量保证
4. **文档编写** - 用户指南和技术文档
5. **性能优化** - 性能分析和优化

## 📖 完整文档

详细的开发计划、实施策略和贡献指南，请参考英文完整版：

- [📖 英文完整版](../en/roadmap.md) - 包含完整的发展路线图和计划

## 🤝 参与翻译

如果您愿意帮助完善此文档的中文翻译：

1. 参考英文版本的详细开发计划
2. 翻译技术规格和时间线
3. 保持技术术语的准确性
4. 提交 Pull Request

---

> **提示**: 详细的实施策略和贡献指南请参考英文文档。 