# elinOS

**Language / 语言**: [English](README.md) | [简体中文](README_zh.md)

基于 Rust 开发的**实验性** RISC-V 操作系统，实现了动态内存管理、结构清晰的系统调用架构、VirtIO 设备支持、文件系统操作，以及 **ELF 程序执行能力**。非常适合**学习**、**研究**和**教育用途**。

## 🚀 快速开始

```bash
# 编译并运行 elinOS
make
./run.sh
```

**您将看到：**
- 功能全面的交互式命令行界面
- 专业的系统调用架构（9大类别，15+ 系统调用）
- 文件系统操作（创建、读取、删除文件）
- VirtIO 设备发现和管理
- ELF 二进制文件加载和分析
- 系统信息和内存管理

## ✨ 核心特性

### 🏗 **清晰架构**
- **范围化系统调用组织** (1-50: 文件 I/O, 51-70: 目录操作等)
- **结构化设计** 包含 9 个功能模块
- **类型安全实现** 充分利用 Rust 安全特性

### 💾 **内存管理**
- **动态内存探测** 基于 OpenSBI 实现
- **自适应堆配置** 根据可用内存动态调整
- **分核心栈分配** 支持最多 4 个 RISC-V 核心
- **内存安全操作** 包含边界检查

### 🔧 **设备与 I/O 支持**
- **VirtIO 块设备** 驱动程序支持自动发现
- **基于 MMIO 的设备探测** 使用标准地址
- **块设备抽象层** 为未来文件系统集成做准备
- **串口 UART** 通信和调试支持

### 📁 **文件系统操作**
- **内存文件系统** 支持类 POSIX 操作
- **文件管理命令** (ls, cat, touch, rm)
- **动态文件创建** 和删除
- **可扩展设计** 为真实文件系统支持做准备

### 🔄 **ELF 程序支持**
- **完整的 ELF64 加载器** 包含验证和解析
- **程序头分析** 和段信息提取
- **内存安全的 ELF 处理** 使用 Rust 类型系统
- **执行就绪** (为未来虚拟内存做基础)

## 📖 文档指南

| 指南 | 中文版本 | 英文版本 |
|-------|---------|----------|
| 🚀 **快速开始** | [逐步完善](docs/zh/getting-started.md) 🚧 | [完整版](docs/en/getting-started.md) ✅ |
| 💻 **命令参考** | [逐步完善](docs/zh/commands.md) 🚧 | [完整版](docs/en/commands.md) ✅ |
| 🏗 **架构设计** | [逐步完善](docs/zh/architecture.md) 🚧 | [完整版](docs/en/architecture.md) ✅ |
| 👨‍💻 **开发指南** | [逐步完善](docs/zh/development.md) 🚧 | [完整版](docs/en/development.md) ✅ |
| 🐛 **调试指南** | [逐步完善](docs/zh/debugging.md) 🚧 | [完整版](docs/en/debugging.md) ✅ |
| 🗺 **发展路线** | [逐步完善](docs/zh/roadmap.md) 🚧 | [完整版](docs/en/roadmap.md) ✅ |

> **📂 文档组织**: 
> - 📁 `docs/zh/` - 中文文档（逐步完善中）
> - 📁 `docs/en/` - 英文文档（完整版本）
> 
> **🙋‍♀️ 参与翻译**: 欢迎贡献中文翻译！详见 [文档说明](docs/README.md)

## 🖥 交互演示

elinOS 启动后，探索其功能：

```bash
elinOS> help                    # 显示所有可用命令
elinOS> version                 # 显示 elinOS 版本信息
elinOS> memory                  # 查看内存布局
elinOS> devices                 # 探测 VirtIO 设备
elinOS> syscall                 # 显示系统调用架构
elinOS> ls                      # 列出文件系统内容
elinOS> cat hello.txt           # 显示文件内容
elinOS> elf-info hello.elf      # 分析 ELF 二进制结构
elinOS> elf-load hello.elf      # 将 ELF 加载到内存
elinOS> shutdown                # 优雅系统关机
```

## 🎯 当前功能

- ✅ **完整启动流程** 从 OpenSBI 到交互式命令行
- ✅ **专业系统调用系统** 9大类别覆盖所有操作系统功能
- ✅ **动态命令分发** 易于添加新命令
- ✅ **内存管理** 自动配置
- ✅ **VirtIO 设备支持** 包含块设备驱动
- ✅ **文件操作** 创建、读取、删除、列出文件
- ✅ **ELF 二进制加载** 解析和加载 RISC-V 可执行文件
- ✅ **系统信息** 调试和监控命令
- ✅ **优雅关机/重启** 通过 OpenSBI 接口

## 🚧 后续开发

### 第一阶段：基础完善（短期）
- **完整系统调用实现** (SYS_READ, 目录操作)
- **增强内存管理** (mmap, 内存保护)
- **VirtIO 网络设备** 支持

### 第二阶段：程序执行（中期）
- **虚拟内存管理** (RISC-V Sv39 页表)
- **进程管理** (fork, exec, 调度)
- **实际 ELF 程序执行** 用户/内核模式分离

### 第三阶段：高级功能（长期）
- **真实文件系统** (FAT32 集成)
- **网络协议栈** (IP, 套接字)
- **多核支持** (SMP)

*详细开发计划请参见 [发展路线](docs/en/roadmap.md)。*

## 🛠 环境要求

- **Rust** 包含 `riscv64gc-unknown-none-elf` 目标
- **QEMU** RISC-V 系统模拟器
- **Linux/macOS/WSL** 开发环境

*详细安装说明请参见 [快速开始指南](docs/en/getting-started.md)（英文）。*

## 🏆 为什么选择 elinOS？

### 学习价值
- **清晰易读的代码** 演示操作系统概念
- **结构化架构设计** 遵循良好实践
- **全面详细文档** 深入解释各个方面
- **递进式复杂度** 从基础到高级特性

### 开发价值
- **教育级模式** 非常适合学习系统编程
- **类型安全实现** 防止常见操作系统错误
- **模块化设计** 易于扩展和实验
- **现代工具链** 利用 Rust 生态系统优势

### 研究价值
- **RISC-V 原生** 支持最新开放指令集
- **可扩展基础** 支持实验性功能
- **清晰抽象** 适合学术使用
- **文档完善的接口** 便于修改

## 🤝 参与贡献

我们欢迎贡献！重点领域：

- **核心系统开发** - 系统调用、内存管理、设备
- **用户应用程序** - 命令行工具、实用程序
- **测试与质量保证** - 测试用例、质量保证
- **文档编写** - 指南、教程、API 文档

*贡献详情请参见 [开发指南](docs/en/development.md)。*

## 📄 开源协议

MIT 协议 - 详情请参见 [LICENSE](LICENSE) 文件。

本项目为自由开源软件，允许无限制地使用、修改和分发。

---

**elinOS** 展示了 Rust 语言下**教育级**操作系统开发实践，是优秀的**学习平台**和 RISC-V 系统开发的**实验基础**。

**🎮 立即体验：** `./build.sh && ./run.sh` 